<!-- Header -->

<style>
.main-hyperlink {
    font-size:20px;
    font-family: Montserrat,"Helvetica Neue",Helvetica,Arial,sans-serif;
}
.my-div-icon {
  padding: 6px 8px;
  font: 20px/24px Arial, Helvetica, sans-serif;
  border-radius: 5px;
}
.my-div-icon h4 {
  margin: 0 0 5px;
  color: #202d3b;
}

.region_label {
    width: 700px;
    font-family: Montserrat,"Helvetica Neue",Helvetica,Arial,sans-serif;
    text-transform: uppercase;
    font-weight: 700;
}

/*This sets the height of the bottom map label */
.leaflet-horizontalcenter {
   padding-top: 510px;
   margin: 0 auto;
   width: 660px;
}

.leaflet-horizontalcenter .leaflet-control {
    margin-bottom: 0px;
}

.info {
  font-family: Montserrat,"Helvetica Neue",Helvetica,Arial,sans-serif;
  text-transform: uppercase;
  font-weight: 700;
  font-size: 20px;
  color: #2c3e50;
}
.circleBase {
    border-radius: 50%;
    behavior: url(PIE.htc); /* remove if you don't care about IE8 */
}

.type1 {
    width: 22px;
    height: 22px;
    background: #18bc9c;
    border: 2px solid white;
}
.label-span{
    font-size: 15px;
    font-family: Montserrat,"Helvetica Neue",Helvetica,Arial,sans-serif;
    color:rgba(0,0,0,.75);
}

.img-popup {
  width: 150px;
}


/*
#DenpasarPopup:hover:before {
    content: url("{{ site.baseurl }}/img/portfolio/denpasar2.png"); 
}
*/

</style>

<script src='https://api.mapbox.com/mapbox.js/v2.4.0/mapbox.js'></script>
<link href='https://api.mapbox.com/mapbox.js/v2.4.0/mapbox.css' rel='stylesheet' />


<header style="margin-top: 75px;">




<div id="map" style="top:0px;left:0px;width:100%;height:550px;"></div>


                    <!--<span class="skills">{{ site.description }}</span>
</header>-->

<script type="text/javascript">

var txt = "";
txt += "<p>innerWidth: " + window.innerWidth + "</p>";
txt += "<p>innerHeight: " + window.innerHeight + "</p>";
txt += "<p>outerWidth: " + window.outerWidth + "</p>";
txt += "<p>outerHeight: " + window.outerHeight + "</p>";

console.log(txt);


L.mapbox.accessToken = 'pk.eyJ1IjoiaGl1IiwiYSI6InJWNGZJSzgifQ.xK1ndT3W8XL9lwVZrT6jvQ';

if (window.innerWidth < 1200) {

var map = L.mapbox.map('map', '', {
    attributionControl: false,
    zoomControl:false,
    scrollWheelZoom: false
  }).setView([18, 24], 2);

} else {

var map = L.mapbox.map('map', '', {
    attributionControl: false,
    zoomControl:false,
    scrollWheelZoom: false
  }).setView([18, 24], 3);

}


/*
    var map = L.mapbox.map('map')
    .setView([38.97416, -95.23252], 15);
*/

// Use styleLayer to add a Mapbox style created in Mapbox Studio
  var baseLayer = L.mapbox.styleLayer('mapbox://styles/hiu/cipse716l000lcbnk2l6sgbz8',{
    minZoom: 1,
    maxZoom: 16,
    scrollWheelZoom: true,
    zoomControl: false // we'll add later
  }).addTo(map);



var bottomText = L.divIcon({  
  className: "my-div-icon",
  html: "<div class='region_label'>Resiliency - Human Security - Emergency Preparedness</div>"
});



var CuscoIcon = L.divIcon({
    className: 'city-icon',
    html: '<div class="circleBase type1"></div>'+
              '<span class="label-span">Cusco, Peru</span>'
});
// you can set .my-div-icon styles in CSS

cuscoMarker = L.marker([-13.529, -72.009], {icon: CuscoIcon}).addTo(map);

cuscoMarker.bindPopup('<img src="{{ site.baseurl }}/img/portfolio/cusco2.png" class="img-popup" alt="Cusco"></br><p>Cusco is located in the highlands of southeastern Peru at an elevation of 3,400 meters. It is the capital of the Cusco region and province, and has an estimated population of more than 435,000.</p>');

cuscoMarker.on('mouseover', function (e) {
            this.openPopup();
            $( ".leaflet-popup-close-button" ).hide();
        });
cuscoMarker.on('mouseout', function (e) {
            this.closePopup();
            $( ".leaflet-popup-close-button" ).show();
        });

var DenpasarIcon = L.divIcon({
    className: 'city-icon',
    html: '<div class="img-div"><a href="http://2cdenpasar.com/" target="_blank" > <div class="circleBase type1" id="DenpasarPopup"></div>'+
              '<span class="label-span">Denpasar, Indonesia</span></a></div>'
});
// you can set .my-div-icon styles in CSS

denpasarMarker = L.marker([-8.672, 115.154], {icon: DenpasarIcon}).addTo(map);

/*
DenpasarMarker.bindPopup('<div class="caption"><div class="caption-content"><i class=""><h3>Denpasar, Indonesia</h3></i></div></div><img src="{{ site.baseurl }}/img/portfolio/denpasar2.png" class="img-popup" alt="Denpasar">');
*/

denpasarMarker.bindPopup('<img src="{{ site.baseurl }}/img/portfolio/denpasar2.png" class="img-popup" alt="Denpasar">');

denpasarMarker.on('mouseover', function (e) {
            //console.log('before popup');
            this.openPopup();
            //debugger;
            //console.log('after popup');
            $( ".leaflet-popup-close-button" ).hide();
        });
denpasarMarker.on('mouseout', function (e) {
            this.closePopup();
            $( ".leaflet-popup-close-button" ).show();
        });

var KharkivIcon = L.divIcon({
    className: 'city-icon',
    html: '<a href="{{ site.baseurl }}/kharkiv" target="_blank" ><div class="circleBase type1"></div>'+
              '<span class="label-span">Kharkiv, Ukraine</span></a>'
});

L.marker([49.99, 36.145], {icon: KharkivIcon}).addTo(map);

var MedellinIcon = L.divIcon({
    className: 'city-icon',
    html: '<div class="circleBase type1"></div>'+
              '<span class="label-span">Medellin, Colombia</span>'
});

MedellinMarker = L.marker([6.26, -75.666], {icon: MedellinIcon}).addTo(map);

MedellinMarker.bindPopup("Medellin is the capital of the mountainous Antioquia province of Colombia.  The metropolitan area of Medellin includes nine other cities and is the second largest urban agglomeration in the country.  Medellin is a hub of economic, education and cultural activity and at the forefront of urban development for innovation, livability, and urban sustainability.  Rapid urban growth and migration have created challenges for future planning.");

var MekelleIcon = L.divIcon({
    className: 'city-icon',
    html: '<div class="circleBase type1"></div>'+
              '<span class="label-span">Mekelle, Ethiopia</span>'
});

mekelleMarker = L.marker([13.474, 39.385], {icon: MekelleIcon}).addTo(map);

mekelleMarker.bindPopup("Mekelle is the capital city of the Tigray Regional State of Ethiopia. It is one of the principal economic, cultural, political, and educational centers of the country. Mekelle is known for the cultural landmarks that include Ethiopian Orthodox churches and historic castles. Climate extremes are characteristic of the region. Mekelle is experiencing severe water problems that include lack of an adequate supply and quality issues.");

var PokharaIcon = L.divIcon({
    className: 'city-icon',
    html: '<div class="circleBase type1"></div>'+
              '<span class="label-span">Pokhara, Nepal</span>'
});

pokharaMarker = L.marker([28.23, 83.877], {icon: PokharaIcon}).addTo(map);

pokharaMarker.bindPopup("Considered Nepal’s most picturesque destination, Pokhara is located in a tectonically active valley surrounded by the Himalayan and Mahabharat Mountain Ranges. The Seti River and tributaries flow from these mountains and freshwater lakes are located throughout the city. The same geological features that contribute to Pokhara’s natural beauty cause its volatility. The United Nations Development Programme ranks Nepal 11th in the world for its susceptibility to natural disasters that include earthquakes, floods, landslides, drought, and sinkholes.");


// http://stackoverflow.com/questions/33614912/how-to-locate-leaflet-zoom-control-in-a-desired-position
// Create additional Control placeholders
function addControlPlaceholders(map) {
    var corners = map._controlCorners,
        l = 'leaflet-',
        container = map._controlContainer;

    function createCorner(hSide) {
        var className = l + hSide;

        corners[hSide] = L.DomUtil.create('div', className, container);
    }

    //createCorner('horizontalcenter', 'top');
    createCorner('horizontalcenter');
}
addControlPlaceholders(map);

// Change the position of the Zoom Control to a newly created placeholder.
//map.zoomControl.setPosition('verticalcenterright');

var info = L.control({position: 'horizontalcenter'});

            info.onAdd = function (map) {
              this._div = L.DomUtil.create('div', 'info');
              this._div.innerHTML = '<div>Resiliency - Human Security - Emergency Preparedness</div>';
              return this._div;
            };

            info.addTo(map);


// You can also put other controls in the same placeholder.
//L.control.scale({position: 'verticalcenterright'}).addTo(map);


</script>
